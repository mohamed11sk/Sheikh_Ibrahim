<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ุงููููุน ุงูุฑุณูู ููุถููุฉ ุงูุดูุฎ ุฅุจุฑุงููู ุงูุญุตุฑู ุงูุฃุฒูุฑู</title>
  <link rel="stylesheet" href="style.css">
  
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-Y90GX9L2VK"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-Y90GX9L2VK');
  </script>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&family=El+Messiri:wght@600&display=swap"
    rel="stylesheet">
  <style>
   
  </style>
</head>

<body>
  <!-- ุจููุฉ ุงูููุฏ ููุง ูู -->
  <!-- ุดุฑูุท ุชูุฏู ุงูุชูุฑูุฑ -->
  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>

  <!-- ุฒุฑ ุชุญูู ูุคุฐู ุงูุตูุงุฉ -->
  <button class="prayer-toggle-btn" id="prayerToggleBtn">
    <i class="fas fa-mosque"></i>
    <span>ุฃููุงุช ุงูุตูุงุฉ</span>
  </button>

  <!-- ูุคุฐู ุงูุตูุงุฉ ุงููุญุณู -->
  <div class="prayer-times-container" id="prayerTimesContainer">
    <div class="prayer-times-header">
      <div>
        <i class="fas fa-mosque"></i>
        <span id="currentPrayerTitle">ุฃููุงุช ุงูุตูุงุฉ</span>
      </div>
      <div id="prayerLocation">ุงููุงูุฑุฉุ ูุตุฑ</div>
    </div>

    <div class="prayer-time" id="fajrTime">
      <span class="prayer-name">ุงููุฌุฑ</span>
      <span class="prayer-value" id="fajrValue">--:--</span>
    </div>

    <div class="prayer-time" id="dhuhrTime">
      <span class="prayer-name">ุงูุธูุฑ</span>
      <span class="prayer-value" id="dhuhrValue">--:--</span>
    </div>

    <div class="prayer-time" id="asrTime">
      <span class="prayer-name">ุงูุนุตุฑ</span>
      <span class="prayer-value" id="asrValue">--:--</span>
    </div>

    <div class="prayer-time" id="maghribTime">
      <span class="prayer-name">ุงููุบุฑุจ</span>
      <span class="prayer-value" id="maghribValue">--:--</span>
    </div>

    <div class="prayer-time" id="ishaTime">
      <span class="prayer-name">ุงูุนุดุงุก</span>
      <span class="prayer-value" id="ishaValue">--:--</span>
    </div>

    <div class="location-info" id="locationInfo">
      ุฌุงุฑู ุชุญุฏูุฏ ุงููููุน...
    </div>

    <button class="refresh-btn" id="refreshPrayerTimes">
      <i class="fas fa-sync-alt"></i> ุชุญุฏูุซ
    </button>
  </div>

  <div class="container">
    <div class="header">
      <div class="mosque-icon">
        <i class="fas fa-mosque"></i>
      </div>
      <h1>ูุถููุฉ ุงูุดูุฎ ุงูุฏูุชูุฑ<br>ุฅุจุฑุงููู ุงูุญุตุฑู ุงูุฃุฒูุฑู</h1>
      <p>ุฅูุถู ูุน ูุถููุฉ ุงูุดูุฎ ููุชุงุจุนุฉ ุงูุฏุฑูุณ ูุงููุญุงุถุฑุงุช ูุงูุฎุทุจ ุงูุฌุฏูุฏุฉ ูู ุฌุงูุน ุนูู ุขุบุง ๐</p>

      <!-- ุขูุฉ ุนุดูุงุฆูุฉ -->
      <div class="random-ayah scroll-effect">
        <div class="text" id="randomAyahText">"ููุง ุฃููููููุง ุงูููุฐูููู ุขูููููุง ุงุชูููููุง ุงูููููู ููููููููุง ููููููุง
          ุณูุฏููุฏูุง"</div>
        <div class="surah-name">ุณูุฑุฉ ุงูุฃุญุฒุงุจ - ุงูุขูุฉ 70</div>
      </div>
     <!-- ุนุฏุงุฏ ุงูุฒูุงุฑุงุช -->
<div class="visitor-counter scroll-effect">
  <i class="fas fa-users"></i>
  <span id="visitCount">0</span> ุฒุงุฆุฑ ูููููุน
</div>
    </div>

    <div class="social-links">
      <a href="https://www.facebook.com/groups/7495656690521131/?ref=share&mibextid=CTbP7E" target="_blank"
        class="social-card facebook scroll-effect"
        data-ayah="ููุชูุนูุงูููููุง ุนูููู ุงููุจูุฑูู ููุงูุชููููููููฐ  ููููุง ุชูุนูุงูููููุง ุนูููู ุงููุฅูุซููู ููุงููุนูุฏูููุงูู  ููุงุชูููููุง ุงูููููู  ุฅูููู ุงูููููู ุดูุฏููุฏู ุงููุนูููุงุจู"
        data-surah="ุงููุงุฆุฏุฉ: 2">
        <div class="social-icon"><i class="fab fa-facebook-f"></i></div>
        <div class="social-name">ููุณุจูู</div>
      </a>

      <a href="https://youtube.com/@elshakh.ebrahim?si=vB2Nc92TIYnrDRbN" target="_blank"
        class="social-card youtube scroll-effect"
        data-ayah="ูููููู ุฃูุญูุณููู ููููููุง ููููููู ุฏูุนูุง ุฅูููู ุงูููููู ููุนููููู ุตูุงููุญูุง ููููุงูู ุฅููููููู ูููู ุงููููุณูููููููู"
        data-surah="ูุตูุช: 33">
        <div class="social-icon"><i class="fab fa-youtube"></i></div>
        <div class="social-name">ููุชููุจ</div>
      </a>

      <a href="https://chat.whatsapp.com/LPRrIJOjQ162o6HHC4nRg2" target="_blank"
        class="social-card whatsapp scroll-effect"
        data-ayah="ุงุฏูุนู ุฅูููููฐ ุณูุจูููู ุฑูุจูููู ุจูุงููุญูููููุฉู ููุงููููููุนูุธูุฉู ุงููุญูุณูููุฉู  ููุฌูุงุฏูููููู ุจูุงูููุชูู ูููู ุฃูุญูุณููู"
        data-surah="ุงููุญู: 125">
        <div class="social-icon"><i class="fab fa-whatsapp"></i></div>
        <div class="social-name">ูุงุชุณุงุจ</div>
      </a>

      <a href="https://t.me/Sheikh_Ibrahim" target="_blank" class="social-card telegram scroll-effect"
        data-ayah="ููููู ุฑููุจูู ุฒูุฏูููู ุนูููููุง" data-surah="ุทู: 114">
        <div class="social-icon"><i class="fab fa-telegram-plane"></i></div>
        <div class="social-name">ุชูุบุฑุงู</div>
      </a>

      <a href="javascript:location.reload();" class="social-card website scroll-effect"
        data-ayah="ุฅููููููุง ููุนูููุฑู ููุณูุงุฌูุฏู ุงูููููู ูููู ุขูููู ุจูุงูููููู ููุงูููููููู ุงููุขุฎูุฑู"
        data-surah="ุงูุชูุจุฉ: 18">
        <div class="social-icon"><i class="fas fa-globe-africa"></i></div>
        <div class="social-name">ุงููููุน ุงูุฑุณูู</div>
        <br>
        <h3>ูุฑูุจุง...</h3>
      </a>
    </div>

    <div class="signature scroll-effect">
      ยฉ ุฌููุน ุงูุญููู ูุญููุธุฉ - ุงููููุน ุงูุฑุณูู ููุถููุฉ ุงูุดูุฎ ุงูุฏูุชูุฑ<br>
      ุฅุจุฑุงููู ุงูุญุตุฑู ุงูุฃุฒูุฑู<br>
      <span id="currentDate"></span> <br>ุฌุงูุน ุนูู ุขุบุง ๐
    </div>
  </div>

  <!-- ุฒุฑ ุงูุนูุฏุฉ ููุฃุนูู -->
  <button onclick="scrollToTop()" id="scrollTopBtn" title="ุงูุนูุฏุฉ ููุฃุนูู"><i class="fas fa-arrow-up"></i></button>

  <!-- ุฒุฑ ุงููุดุงุฑูุฉ -->
  <button onclick="shareWebsite()" id="shareBtn" title="ูุดุงุฑูุฉ ุงููููุน"><i class="fas fa-share-alt"></i></button>

  <script>
    // ุฅุถุงูุฉ ูุชุบูุฑุงุช ูุชุชุจุน ุญุงูุฉ ุงูุณูุฑูู
    let lastScrollPosition = 0;
    let isPrayerMenuOpen = false;

    document.addEventListener('DOMContentLoaded', function () {
      // ุฅูุดุงุก ุฌุฒูุฆุงุช ูุชุญุฑูุฉ
      const colors = ['rgba(0, 173, 181, 0.3)', 'rgba(255, 211, 105, 0.3)', 'rgba(238, 238, 238, 0.3)'];
      for (let i = 0; i < 30; i++) {
        const particle = document.createElement('div');
        particle.classList.add('particle');
        const size = Math.random() * 10 + 5;
        const posX = Math.random() * window.innerWidth;
        const posY = Math.random() * window.innerHeight;
        const color = colors[Math.floor(Math.random() * colors.length)];
        const duration = Math.random() * 20 + 10;
        const delay = Math.random() * 10;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.left = `${posX}px`;
        particle.style.top = `${posY}px`;
        particle.style.background = color;
        particle.style.animation = `float ${duration}s ease-in-out ${delay}s infinite`;
        document.body.appendChild(particle);
      }

      // ุชูุนูู ุชุฃุซูุฑุงุช ุงูุชูุฑูุฑ
      initScrollEffects();

      // ุนุฑุถ ุงูุชุงุฑูุฎ ุงูุญุงูู
      const options = { year: 'numeric', month: 'long', day: 'numeric' };
      const today = new Date();
      document.getElementById('currentDate').textContent = today.toLocaleDateString('ar-EG', options);

      // ุชุญููู ุขูุฉ ุนุดูุงุฆูุฉ
      loadRandomAyah();

      // ุชุญููู ุฃููุงุช ุงูุตูุงุฉ ููุตุฑ
      loadPrayerTimesForEgypt();

      // ุฒุฑ ุงูุชุญุฏูุซ
      document.getElementById('refreshPrayerTimes').addEventListener('click', function () {
        loadPrayerTimesForEgypt();
      });

      // ุงูุชุญูู ูู ุนุฑุถ/ุฅุฎูุงุก ููุงุนูุฏ ุงูุตูุงุฉ
      document.getElementById('prayerToggleBtn').addEventListener('click', function () {
        const prayerContainer = document.getElementById('prayerTimesContainer');
        prayerContainer.classList.toggle('show');
        isPrayerMenuOpen = prayerContainer.classList.contains('show');

        // ุชุบููุฑ ุฃููููุฉ ุงูุฒุฑ ุญุณุจ ุงูุญุงูุฉ
        const icon = this.querySelector('i');
        if (isPrayerMenuOpen) {
          icon.classList.remove('fa-mosque');
          icon.classList.add('fa-times');
          this.querySelector('span').textContent = 'ุฅุบูุงู';
        } else {
          icon.classList.remove('fa-times');
          icon.classList.add('fa-mosque');
          this.querySelector('span').textContent = 'ุฃููุงุช ุงูุตูุงุฉ';
        }
      });

      // ุฅุบูุงู ุงููุงุฆูุฉ ุนูุฏ ุงูููุฑ ุฎุงุฑุฌูุง
      document.addEventListener('click', function (event) {
        const prayerContainer = document.getElementById('prayerTimesContainer');
        const toggleBtn = document.getElementById('prayerToggleBtn');

        if (!prayerContainer.contains(event.target) && !toggleBtn.contains(event.target)) {
          if (prayerContainer.classList.contains('show')) {
            prayerContainer.classList.remove('show');
            isPrayerMenuOpen = false;
            const icon = toggleBtn.querySelector('i');
            icon.classList.remove('fa-times');
            icon.classList.add('fa-mosque');
            toggleBtn.querySelector('span').textContent = 'ุฃููุงุช ุงูุตูุงุฉ';
          }
        }
      });
    });

    // ุฏุงูุฉ ููุชุนุงูู ูุน ุงุชุฌุงู ุงูุณูุฑูู
    function handleScrollDirection() {
      const currentScrollPosition = window.scrollY || document.documentElement.scrollTop;
      const prayerContainer = document.getElementById('prayerTimesContainer');
      const toggleBtn = document.getElementById('prayerToggleBtn');

      // ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ููุฑุฑ ูุฃุณูู
      if (currentScrollPosition > lastScrollPosition) {
        // ุฅุฎูุงุก ุงููุงุฆูุฉ ุฅุฐุง ูุงูุช ููุชูุญุฉ
        if (prayerContainer.classList.contains('show')) {
          prayerContainer.classList.remove('show');
          isPrayerMenuOpen = true; // ูุญุชูุธ ุจุญุงูุฉ ุฃููุง ูุงูุช ููุชูุญุฉ
        }
      }
      // ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ููุฑุฑ ูุฃุนูู
      else if (currentScrollPosition < lastScrollPosition) {
        // ุฅุนุงุฏุฉ ุฅุธูุงุฑ ุงููุงุฆูุฉ ุฅุฐุง ูุงูุช ููุชูุญุฉ ุณุงุจูุงู
        if (isPrayerMenuOpen && currentScrollPosition < 100) {
          prayerContainer.classList.add('show');
        }
      }

      // ุฅุฐุง ูุตููุง ูุฃุนูู ุงูุตูุญุฉุ ูุนูุฏ ุชุนููู ุงูุญุงูุฉ
      if (currentScrollPosition <= 0) {
        isPrayerMenuOpen = false;
      }

      lastScrollPosition = currentScrollPosition;
    }

    // ุฏุงูุฉ ููุดุงุฑูุฉ ุฑุงุจุท ุงููููุน
    function shareWebsite() {
      if (navigator.share) {
        navigator.share({
          title: document.title,
          url: window.location.href
        }).then(() => {
          console.log('ุชูุช ูุดุงุฑูุฉ ุงูุฑุงุจุท ุจูุฌุงุญ');
        }).catch((error) => {
          console.error('ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ูุดุงุฑูุฉ ุงูุฑุงุจุท: ', error);
        });
      } else {
        alert("ูุชุตูุญู ูุง ูุฏุนู ููุฒุฉ ุงููุดุงุฑูุฉุ ููููู ูุณุฎ ุงูุฑุงุจุท ูุฏููุงู: " + window.location.href);
      }
    }

    // ุฏุงูุฉ ููุชูุฑูุฑ ุฅูู ุงูุฃุนูู
    function scrollToTop() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    }

    // ุนุฑุถ/ุฅุฎูุงุก ุฒุฑ ุงูุนูุฏุฉ ููุฃุนูู ุนูุฏ ุงูุชูุฑูุฑ
    window.onscroll = function () {
      showScrollButton();
      updateProgressBar();
      togglePrayerButtonVisibility();
      handleScrollDirection();
    };

    function showScrollButton() {
      const btn = document.getElementById("scrollTopBtn");
      if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
        btn.style.display = "flex";
      } else {
        btn.style.display = "none";
      }
    }

    // ุฅุธูุงุฑ/ุฅุฎูุงุก ุฒุฑ ููุงุนูุฏ ุงูุตูุงุฉ ุนูุฏ ุงูุชูุฑูุฑ
    function togglePrayerButtonVisibility() {
      const prayerBtn = document.getElementById("prayerToggleBtn");
      const scrollPosition = window.scrollY || document.documentElement.scrollTop;

      if (scrollPosition > 100) {
        prayerBtn.classList.add('hide');
      } else {
        prayerBtn.classList.remove('hide');
      }
    }

    // ุชุญุฏูุซ ุดุฑูุท ุงูุชูุฏู
    function updateProgressBar() {
      const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
      const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      const scrolled = (winScroll / height) * 100;
      document.getElementById("progressBar").style.width = scrolled + "%";
    }

    // ุชุฃุซูุฑุงุช ุงูุชูุฑูุฑ ููุนูุงุตุฑ
    function initScrollEffects() {
      const scrollElements = document.querySelectorAll('.scroll-effect');

      const elementInView = (el, dividend = 1) => {
        const elementTop = el.getBoundingClientRect().top;
        return (
          elementTop <= (window.innerHeight || document.documentElement.clientHeight) / dividend
        );
      };

      const displayScrollElement = (element) => {
        element.classList.add('visible');
      };

      const handleScrollAnimation = () => {
        scrollElements.forEach((el) => {
          if (elementInView(el, 1.2)) {
            displayScrollElement(el);
          }
        });
      };

      // ุชูุนูู ุนูุฏ ุงูุชุญููู ุฃููุงู
      scrollElements.forEach((el) => {
        if (elementInView(el, 1.2)) {
          displayScrollElement(el);
        }
      });

      // ุซู ุชูุนูู ุนูุฏ ุงูุชูุฑูุฑ
      window.addEventListener('scroll', () => {
        handleScrollAnimation();
      });
    }

    // ุขูุฉ ุนุดูุงุฆูุฉ
    async function loadRandomAyah() {
      try {
        // ูููู ุงุณุชุจุฏุงู ูุฐุง ุจุทูุจ API ุญูููู ูุขูุงุช ุงููุฑุขู
        const ayahs = [
          { text: "ููุง ุฃููููููุง ุงูููุฐูููู ุขูููููุง ุงุชูููููุง ุงูููููู ููููููููุง ููููููุง ุณูุฏููุฏูุง", surah: "ุณูุฑุฉ ุงูุฃุญุฒุงุจ - ุงูุขูุฉ 70" },
          { text: "ุฅูููู ุงูููููู ููุนู ุงูุตููุงุจูุฑูููู", surah: "ุณูุฑุฉ ุงูุจูุฑุฉ - ุงูุขูุฉ 153" },
          { text: "ููุฐููููุฑู ููุฅูููู ุงูุฐููููุฑูููฐ ุชููููุนู ุงููููุคูููููููู", surah: "ุณูุฑุฉ ุงูุฐุงุฑูุงุช - ุงูุขูุฉ 55" },
          { text: "ููููุง ุชููููููููู ุฅููููุง ุจูุงูููููู  ุนููููููู ุชููููููููุชู ููุฅููููููู ุฃููููุจู", surah: "ุณูุฑุฉ ููุฏ - ุงูุขูุฉ 88" },
          { text: "ููุงุณูุชูุนูููููุง ุจูุงูุตููุจูุฑู ููุงูุตููููุงุฉู  ููุฅููููููุง ููููุจููุฑูุฉู ุฅููููุง ุนูููู ุงููุฎูุงุดูุนูููู", surah: "ุณูุฑุฉ ุงูุจูุฑุฉ - ุงูุขูุฉ 45" },
          { text: "ุฑูุจููููุง ุขุชูููุง ููู ุงูุฏููููููุง ุญูุณูููุฉู ููููู ุงููุขุฎูุฑูุฉู ุญูุณูููุฉู ููููููุง ุนูุฐูุงุจู ุงููููุงุฑู", surah: "ุณูุฑุฉ ุงูุจูุฑุฉ - ุงูุขูุฉ 201" },
          { text: "ุฅููููููุง ูููููููู ุงูุตููุงุจูุฑูููู ุฃูุฌูุฑูููู ุจูุบูููุฑู ุญูุณูุงุจู", surah: "ุณูุฑุฉ ุงูุฒูุฑ - ุงูุขูุฉ 10" },
          { text: "ููููู ููุชูููู ุงูููููู ููุฌูุนูู ููููู ููุฎูุฑูุฌูุง", surah: "ุณูุฑุฉ ุงูุทูุงู - ุงูุขูุฉ 2" },
          { text: "ููุฅูููู ููุนู ุงููุนูุณูุฑู ููุณูุฑูุงุ ุฅูููู ููุนู ุงููุนูุณูุฑู ููุณูุฑูุง", surah: "ุณูุฑุฉ ุงูุดุฑุญ - ุงูุขูุฉ 5-6" },
          { text: "ููุชูููููููู ุนูููู ุงููุญูููู ุงูููุฐูู ููุง ูููููุชู", surah: "ุณูุฑุฉ ุงููุฑูุงู - ุงูุขูุฉ 58" },
          { text: "ููุฅูุฐูุง ุณูุฃููููู ุนูุจูุงุฏูู ุนููููู ููุฅููููู ููุฑููุจู  ุฃูุฌููุจู ุฏูุนูููุฉู ุงูุฏููุงุนู ุฅูุฐูุง ุฏูุนูุงูู", surah: "ุณูุฑุฉ ุงูุจูุฑุฉ - ุงูุขูุฉ 186" },
          { text: "ููููุง ุชูููุฃูุณููุง ููู ุฑููููุญู ุงูููููู  ุฅูููููู ููุง ููููุฃูุณู ููู ุฑููููุญู ุงูููููู ุฅููููุง ุงูููููููู ุงููููุงููุฑูููู", surah: "ุณูุฑุฉ ููุณู - ุงูุขูุฉ 87" },
          { text: "ููููููุจููููููููููู ุจูุดูููุกู ููููู ุงููุฎููููู ููุงููุฌููุนู ููููููุตู ููููู ุงููุฃูููููุงูู ููุงููุฃููููุณู ููุงูุซููููุฑูุงุชู  ููุจูุดููุฑู ุงูุตููุงุจูุฑูููู", surah: "ุณูุฑุฉ ุงูุจูุฑุฉ - ุงูุขูุฉ 155" },
          { text: "ููููุง ุฃูุตูุงุจูููู ูููู ูููุตููุจูุฉู ููุจูููุง ููุณูุจูุชู ุฃูููุฏูููููู ููููุนูููู ุนูู ููุซููุฑู", surah: "ุณูุฑุฉ ุงูุดูุฑู - ุงูุขูุฉ 30" },
          { text: "ุฅูููู ุงูููููู ููุง ููุบููููุฑู ููุง ุจููููููู ุญูุชููููฐ ููุบููููุฑููุง ููุง ุจูุฃููููุณููููู", surah: "ุณูุฑุฉ ุงูุฑุนุฏ - ุงูุขูุฉ 11" }
        ];

        const randomAyah = ayahs[Math.floor(Math.random() * ayahs.length)];
        document.getElementById('randomAyahText').textContent = `"${randomAyah.text}"`;
        document.querySelector('.random-ayah .surah-name').textContent = randomAyah.surah;

        // ุชุฃุซูุฑ ุงููุชุงุจุฉ
        typeWriterEffect('randomAyahText', `"${randomAyah.text}"`);
      } catch (error) {
        console.error('Error loading random ayah:', error);
      }
    }

    // ุชุฃุซูุฑ ุงููุชุงุจุฉ ุนูู ุงูุขูุฉ
    function typeWriterEffect(elementId, text) {
      const element = document.getElementById(elementId);
      element.textContent = '';
      let i = 0;
      const speed = 50; // ุงูุณุฑุนุฉ ุจุงููููู ุซุงููุฉ

      function type() {
        if (i < text.length) {
          element.textContent += text.charAt(i);
          i++;
          setTimeout(type, speed);
        }
      }

      type();
    }

    // ุฏุงูุฉ ูุฌูุจ ุฃููุงุช ุงูุตูุงุฉ ููุตุฑ
    async function loadPrayerTimesForEgypt() {
      try {
        // ุชุญุฏูุฏ ุงููููุน ุงูุฌุบุฑุงูู ูููุณุชุฎุฏู
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            async (position) => {
              const { latitude, longitude } = position.coords;
              await fetchPrayerTimes(latitude, longitude, true);

              // ุนุฑุถ ูุนูููุงุช ุงููููุน
              const city = await getCityName(latitude, longitude);
              document.getElementById('locationInfo').textContent = `ูููุนู ุงูุญุงูู: ${city || 'ุบูุฑ ูุนุฑูู'}`;
              document.getElementById('prayerLocation').textContent = city ? `${city}ุ ูุตุฑ` : 'ูุตุฑ';
            },
            async (error) => {
              console.error('Error getting location:', error);
              // ุงุณุชุฎุฏุงู ุงููุงูุฑุฉ ูุงูุชุฑุงุถู ุฅุฐุง ูู ูุชู ุงูุญุตูู ุนูู ุงููููุน
              await fetchPrayerTimes(30.0444, 31.2357, false);
              document.getElementById('locationInfo').textContent = 'ุชุณุชุฎุฏู ุฃููุงุช ุงูุตูุงุฉ ููุฏููุฉ ุงููุงูุฑุฉ (ุชุญุฏูุฏ ุงููููุน ุบูุฑ ูุชุงุญ)';
              document.getElementById('prayerLocation').textContent = 'ุงููุงูุฑุฉุ ูุตุฑ';
            }
          );
        } else {
          // ุฅุฐุง ุงููุชุตูุญ ูุง ูุฏุนู ุชุญุฏูุฏ ุงููููุน
          await fetchPrayerTimes(30.0444, 31.2357, false);
          document.getElementById('locationInfo').textContent = 'ุชุณุชุฎุฏู ุฃููุงุช ุงูุตูุงุฉ ููุฏููุฉ ุงููุงูุฑุฉ (ุชุญุฏูุฏ ุงููููุน ุบูุฑ ูุฏุนูู)';
          document.getElementById('prayerLocation').textContent = 'ุงููุงูุฑุฉุ ูุตุฑ';
        }
      } catch (error) {
        console.error('Error loading prayer times:', error);
        document.getElementById('locationInfo').textContent = 'ุญุฏุซ ุฎุทุฃ ูู ุฌูุจ ุฃููุงุช ุงูุตูุงุฉ';
      }
    }

    // ุฏุงูุฉ ูุฌูุจ ุฃููุงุช ุงูุตูุงุฉ ูู API
    async function fetchPrayerTimes(lat, lng, isUserLocation) {
      try {
        const date = new Date();
        const year = date.getFullYear();
        const month = date.getMonth() + 1;
        const day = date.getDate();

        // ุงุณุชุฎุฏุงู API ูุฃููุงุช ุงูุตูุงุฉ (ูุซุงู ุจุงุณุชุฎุฏุงู Aladhan API)
        const response = await fetch(
          `https://api.aladhan.com/v1/timings/${day}-${month}-${year}?latitude=${lat}&longitude=${lng}&method=5`
        );

        const data = await response.json();

        if (data.code === 200 && data.data) {
          const timings = data.data.timings;

          // ุนุฑุถ ุฃููุงุช ุงูุตูุงุฉ
          document.getElementById('fajrValue').textContent = formatTime(timings.Fajr);
          document.getElementById('dhuhrValue').textContent = formatTime(timings.Dhuhr);
          document.getElementById('asrValue').textContent = formatTime(timings.Asr);
          document.getElementById('maghribValue').textContent = formatTime(timings.Maghrib);
          document.getElementById('ishaValue').textContent = formatTime(timings.Isha);

          // ุชุญุฏูุฏ ุงูุตูุงุฉ ุงูุญุงููุฉ
          highlightCurrentPrayer(timings);

          // ุฅุฐุง ูู ููู ูููุน ุงููุณุชุฎุฏูุ ูุนุฑุถ ุงููุฏููุฉ ุงููุญุฏุฏุฉ
          if (!isUserLocation && data.data.meta && data.data.meta.timezone) {
            const city = data.data.meta.timezone.split('/')[1] || 'ุงููุงูุฑุฉ';
            document.getElementById('locationInfo').textContent = `ุชุณุชุฎุฏู ุฃููุงุช ุงูุตูุงุฉ ููุฏููุฉ ${city}`;
            document.getElementById('prayerLocation').textContent = `${city}ุ ูุตุฑ`;
          }
        }
      } catch (error) {
        console.error('Error fetching prayer times:', error);
        throw error;
      }
    }

    // ุฏุงูุฉ ูุชูุณูู ุงูููุช
    function formatTime(timeStr) {
      return timeStr.substring(0, 5); // ูุฃุฎุฐ ููุท ุงูุณุงุนุงุช ูุงูุฏูุงุฆู
    }

    // ุฏุงูุฉ ูุชุญุฏูุฏ ุงูุตูุงุฉ ุงูุญุงููุฉ
    function highlightCurrentPrayer(timings) {
      const now = new Date();
      const currentTime = now.getHours() * 60 + now.getMinutes();

      // ุฅุฒุงูุฉ ุงูุชูุดูุท ูู ุฌููุน ุงูุฃููุงุช
      document.querySelectorAll('.prayer-time').forEach(el => {
        el.classList.remove('active');
      });

      // ุชุญููู ุฃููุงุช ุงูุตูุงุฉ ุฅูู ุฏูุงุฆู
      const prayerTimes = [
        { name: 'fajrTime', time: convertToMinutes(timings.Fajr) },
        { name: 'dhuhrTime', time: convertToMinutes(timings.Dhuhr) },
        { name: 'asrTime', time: convertToMinutes(timings.Asr) },
        { name: 'maghribTime', time: convertToMinutes(timings.Maghrib) },
        { name: 'ishaTime', time: convertToMinutes(timings.Isha) }
      ];

      // ุชุญุฏูุฏ ุงูุตูุงุฉ ุงูุญุงููุฉ
      let currentPrayer = null;
      for (let i = 0; i < prayerTimes.length; i++) {
        if (currentTime < prayerTimes[i].time) {
          currentPrayer = i > 0 ? prayerTimes[i - 1].name : prayerTimes[prayerTimes.length - 1].name;
          break;
        }
      }

      // ุฅุฐุง ูุงู ุงูููุช ุจุนุฏ ุงูุนุดุงุก ููุจู ุงููุฌุฑ
      if (!currentPrayer) {
        currentPrayer = prayerTimes[prayerTimes.length - 1].name;
      }

      // ุชูุดูุท ุงูุตูุงุฉ ุงูุญุงููุฉ
      document.getElementById(currentPrayer).classList.add('active');
      document.getElementById('currentPrayerTitle').textContent =
        document.getElementById(currentPrayer).querySelector('.prayer-name').textContent;
    }

    // ุฏุงูุฉ ูุชุญููู ุงูููุช ูู ูุต ุฅูู ุฏูุงุฆู
    function convertToMinutes(timeStr) {
      const [hours, minutes] = timeStr.split(':').map(Number);
      return hours * 60 + minutes;
    }

    // ุฏุงูุฉ ููุญุตูู ุนูู ุงุณู ุงููุฏููุฉ ูู ุงูุฅุญุฏุงุซูุงุช
    async function getCityName(lat, lng) {
      try {
        const response = await fetch(
          `https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lng}&localityLanguage=ar`
        );
        const data = await response.json();
        return data.city || data.locality || null;
      } catch (error) {
        console.error('Error getting city name:', error);
        return null;
      }
    }
   
  </script>
</body>

</html>
